(self.webpackChunk_42board_front=self.webpackChunk_42board_front||[]).push([[902],{8100:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>P,g_:()=>I});var n=r(7294),i=Object.prototype.hasOwnProperty,o=new WeakMap,u=0;const a={isOnline:function(){return void 0===navigator.onLine||navigator.onLine},isDocumentVisible:function(){return"undefined"==typeof document||void 0===document.visibilityState||"hidden"!==document.visibilityState},fetcher:function(e){return fetch(e).then((function(e){return e.json()}))}};var c=new(function(){function e(e){void 0===e&&(e={}),this.__cache=new Map(Object.entries(e)),this.__listeners=[]}return e.prototype.get=function(e){var t=this.serializeKey(e)[0];return this.__cache.get(t)},e.prototype.set=function(e,t){var r=this.serializeKey(e)[0];this.__cache.set(r,t),this.notify()},e.prototype.keys=function(){return Array.from(this.__cache.keys())},e.prototype.has=function(e){var t=this.serializeKey(e)[0];return this.__cache.has(t)},e.prototype.clear=function(){this.__cache.clear(),this.notify()},e.prototype.delete=function(e){var t=this.serializeKey(e)[0];this.__cache.delete(t),this.notify()},e.prototype.serializeKey=function(e){var t=null;if("function"==typeof e)try{e=e()}catch(t){e=""}return Array.isArray(e)?(t=e,e=function(e){if(!e.length)return"";for(var t="arg",r=0;r<e.length;++r){var n=void 0;null===e[r]||"object"!=typeof e[r]&&"function"!=typeof e[r]?n="string"==typeof e[r]?'"'+e[r]+'"':String(e[r]):o.has(e[r])?n=o.get(e[r]):(n=u,o.set(e[r],u++)),t+="@"+n}return t}(e)):e=String(e||""),[e,t,e?"err@"+e:"",e?"validating@"+e:""]},e.prototype.subscribe=function(e){var t=this;if("function"!=typeof e)throw new Error("Expected the listener to be a function.");var r=!0;return this.__listeners.push(e),function(){if(r){r=!1;var n=t.__listeners.indexOf(e);n>-1&&(t.__listeners[n]=t.__listeners[t.__listeners.length-1],t.__listeners.length--)}}},e.prototype.notify=function(){for(var e=0,t=this.__listeners;e<t.length;e++)(0,t[e])()},e}()),s="undefined"!=typeof window&&navigator.connection&&-1!==["slow-2g","2g"].indexOf(navigator.connection.effectiveType);const l={onLoadingSlow:function(){},onSuccess:function(){},onError:function(){},onErrorRetry:function(e,t,r,n,i){if(r.isDocumentVisible()&&!("number"==typeof r.errorRetryCount&&i.retryCount>r.errorRetryCount)){var o=Math.min(i.retryCount||0,8),u=~~((Math.random()+.5)*(1<<o))*r.errorRetryInterval;setTimeout(n,u,i)}},errorRetryInterval:1e3*(s?10:5),focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:1e3*(s?5:3),refreshInterval:0,revalidateOnFocus:!0,revalidateOnReconnect:!0,refreshWhenHidden:!1,refreshWhenOffline:!1,shouldRetryOnError:!0,suspense:!1,compare:function e(t,r){var n,o;if(t===r)return!0;if(t&&r&&(n=t.constructor)===r.constructor){if(n===Date)return t.getTime()===r.getTime();if(n===RegExp)return t.toString()===r.toString();if(n===Array){if((o=t.length)===r.length)for(;o--&&e(t[o],r[o]););return-1===o}if(!n||"object"==typeof t){for(n in o=0,t){if(i.call(t,n)&&++o&&!i.call(r,n))return!1;if(!(n in r)||!e(t[n],r[n]))return!1}return Object.keys(r).length===o}}return t!=t&&r!=r},fetcher:a.fetcher,isOnline:a.isOnline,isDocumentVisible:a.isDocumentVisible};var f=(0,n.createContext)({});f.displayName="SWRConfigContext";const d=f;var v=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function u(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,a)}c((n=n.apply(e,t||[])).next())}))},h=function(e,t){var r,n,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,n=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!((i=(i=u.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},p="undefined"==typeof window,y=p?null:window.requestIdleCallback||function(e){return setTimeout(e,1)},g=p?n.useEffect:n.useLayoutEffect,b={},m={},w={},O={},_={},S={},k={};if(!p&&window.addEventListener){var x=function(e){if(l.isDocumentVisible()&&l.isOnline())for(var t in e)e[t][0]&&e[t][0]()};window.addEventListener("visibilitychange",(function(){return x(w)}),!1),window.addEventListener("focus",(function(){return x(w)}),!1),window.addEventListener("online",(function(){return x(O)}),!1)}var R=function(e,t){void 0===t&&(t=!0);var r=c.serializeKey(e),n=r[0],i=r[2],o=r[3];if(!n)return Promise.resolve();var u=_[n];if(n&&u){for(var a=c.get(n),s=c.get(i),l=c.get(o),f=[],d=0;d<u.length;++d)f.push(u[d](t,a,s,l,d>0));return Promise.all(f).then((function(){return c.get(n)}))}return Promise.resolve(c.get(n))},E=function(e,t,r,n){var i=_[e];if(e&&i)for(var o=0;o<i.length;++o)i[o](!1,t,r,n)},V=function(e,t,r){return void 0===r&&(r=!0),v(void 0,void 0,void 0,(function(){var n,i,o,u,a,s,l,f,d,v,p,y;return h(this,(function(h){switch(h.label){case 0:if(n=c.serializeKey(e),i=n[0],o=n[2],!i)return[2];if(void 0===t)return[2,R(e,r)];if(S[i]=Date.now()-1,k[i]=0,u=S[i],a=m[i],!t||"function"!=typeof t)return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,t(c.get(i))];case 2:return s=h.sent(),[3,4];case 3:return f=h.sent(),l=f,[3,4];case 4:return[3,11];case 5:if(!t||"function"!=typeof t.then)return[3,10];h.label=6;case 6:return h.trys.push([6,8,,9]),[4,t];case 7:return s=h.sent(),[3,9];case 8:return d=h.sent(),l=d,[3,9];case 9:return[3,11];case 10:s=t,h.label=11;case 11:if(u!==S[i]||a!==m[i]){if(l)throw l;return[2,s]}if(void 0!==s&&c.set(i,s),c.set(o,l),k[i]=Date.now()-1,v=_[i]){for(p=[],y=0;y<v.length;++y)p.push(v[y](!!r,s,l,void 0,y>0));return[2,Promise.all(p).then((function(){if(l)throw l;return c.get(i)}))]}if(l)throw l;return[2,s]}}))}))};d.Provider;const j=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i,o,u={};t.length>=1&&(i=t[0]),t.length>2?(o=t[1],u=t[2]):"function"==typeof t[1]?o=t[1]:"object"==typeof t[1]&&(u=t[1]);var a=c.serializeKey(i),s=a[0],f=a[1],p=a[2],x=a[3];u=Object.assign({},l,(0,n.useContext)(d),u);var R=(0,n.useRef)(u);g((function(){R.current=u})),void 0===o&&(o=u.fetcher);var j=function(){var e=c.get(s);return void 0===e?u.initialData:e},C=j(),T=c.get(p),z=!!c.get(x),D=(0,n.useRef)({data:!1,error:!1,isValidating:!1}),I=(0,n.useRef)({data:C,error:T,isValidating:z});(0,n.useDebugValue)(I.current.data);var P=(0,n.useState)(null)[1],K=(0,n.useCallback)((function(e){var t=!1;for(var r in e)I.current[r]!==e[r]&&(I.current[r]=e[r],D.current[r]&&(t=!0));if(t||u.suspense){if(L.current)return;P({})}}),[]),L=(0,n.useRef)(!1),W=(0,n.useRef)(s),M=(0,n.useRef)({emit:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];L.current||(t=R.current)[e].apply(t,r)}}),A=(0,n.useCallback)((function(e,t){return V(W.current,e,t)}),[]),H=function(e,t){t&&(e[s]?e[s].push(t):e[s]=[t])},F=function(e,t){if(e[s]){var r=e[s],n=r.indexOf(t);n>=0&&(r[n]=r[r.length-1],r.pop())}},G=(0,n.useCallback)((function(t){return void 0===t&&(t={}),v(e,void 0,void 0,(function(){var e,r,n,i,a,l,d;return h(this,(function(v){switch(v.label){case 0:if(!s||!o)return[2,!1];if(L.current)return[2,!1];t=Object.assign({dedupe:!1},t),e=!0,r=void 0!==b[s]&&t.dedupe,v.label=1;case 1:return v.trys.push([1,6,,7]),K({isValidating:!0}),c.set(x,!0),r||E(s,I.current.data,I.current.error,!0),n=void 0,i=void 0,r?(i=m[s],[4,b[s]]):[3,3];case 2:return n=v.sent(),[3,5];case 3:return u.loadingTimeout&&!c.get(s)&&setTimeout((function(){e&&M.current.emit("onLoadingSlow",s,u)}),u.loadingTimeout),b[s]=null!==f?o.apply(void 0,f):o(s),m[s]=i=Date.now(),[4,b[s]];case 4:n=v.sent(),setTimeout((function(){delete b[s],delete m[s]}),u.dedupingInterval),M.current.emit("onSuccess",n,s,u),v.label=5;case 5:return m[s]>i||S[s]&&(i<=S[s]||i<=k[s]||0===k[s])?(K({isValidating:!1}),[2,!1]):(c.set(s,n),c.set(p,void 0),c.set(x,!1),a={isValidating:!1},void 0!==I.current.error&&(a.error=void 0),u.compare(I.current.data,n)||(a.data=n),K(a),r||E(s,n,a.error,!1),[3,7]);case 6:return l=v.sent(),delete b[s],delete m[s],c.set(p,l),I.current.error!==l&&(K({isValidating:!1,error:l}),r||E(s,void 0,l,!1)),M.current.emit("onError",l,s,u),u.shouldRetryOnError&&(d=(t.retryCount||0)+1,M.current.emit("onErrorRetry",l,s,u,G,Object.assign({dedupe:!0},t,{retryCount:d}))),[3,7];case 7:return e=!1,[2,!0]}}))}))}),[s]);g((function(){if(s){L.current=!1;var e=I.current.data,t=j();W.current!==s&&(W.current=s),u.compare(e,t)||K({data:t});var r=function(){return G({dedupe:!0})};(u.revalidateOnMount||!u.initialData&&void 0===u.revalidateOnMount)&&(void 0!==t?y(r):r());var n=!1,i=function(){!n&&R.current.revalidateOnFocus&&(n=!0,r(),setTimeout((function(){return n=!1}),R.current.focusThrottleInterval))},o=function(){R.current.revalidateOnReconnect&&r()},a=function(e,t,n,i,o){void 0===e&&(e=!0),void 0===o&&(o=!0);var a={},c=!1;return void 0===t||u.compare(I.current.data,t)||(a.data=t,c=!0),I.current.error!==n&&(a.error=n,c=!0),void 0!==i&&I.current.isValidating!==i&&(a.isValidating=i,c=!0),c&&K(a),!!e&&(o?r():G())};return H(w,i),H(O,o),H(_,a),function(){K=function(){return null},L.current=!0,F(w,i),F(O,o),F(_,a)}}}),[s,G]),g((function(){var t=null,r=function(){return v(e,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return I.current.error||!R.current.refreshWhenHidden&&!R.current.isDocumentVisible()||!R.current.refreshWhenOffline&&!R.current.isOnline()?[3,2]:[4,G({dedupe:!0})];case 1:e.sent(),e.label=2;case 2:return R.current.refreshInterval&&!I.current.error&&(t=setTimeout(r,R.current.refreshInterval)),[2]}}))}))};return R.current.refreshInterval&&(t=setTimeout(r,R.current.refreshInterval)),function(){t&&clearTimeout(t)}}),[u.refreshInterval,u.refreshWhenHidden,u.refreshWhenOffline,G]);var q=(0,n.useMemo)((function(){var e={revalidate:G,mutate:A};return Object.defineProperties(e,{error:{get:function(){return D.current.error=!0,W.current===s?I.current.error:T},enumerable:!0},data:{get:function(){return D.current.data=!0,W.current===s?I.current.data:C},enumerable:!0},isValidating:{get:function(){return D.current.isValidating=!0,I.current.isValidating},enumerable:!0}}),e}),[G]);if(u.suspense){var N=c.get(s),Z=c.get(p);if(void 0===N&&(N=C),void 0===Z&&(Z=T),void 0===N&&void 0===Z){if(b[s]||G(),b[s]&&"function"==typeof b[s].then)throw b[s];N=b[s]}if(void 0===N&&Z)throw Z;return{error:Z,data:N,revalidate:G,mutate:A,isValidating:I.current.isValidating}}return q};var C=function(){return(C=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},T=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function u(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,a)}c((n=n.apply(e,t||[])).next())}))},z=function(e,t){var r,n,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,n=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!((i=(i=u.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},D=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};function I(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i,o,u={};t.length>=1&&(i=t[0]),t.length>2?(o=t[1],u=t[2]):"function"==typeof t[1]?o=t[1]:"object"==typeof t[1]&&(u=t[1]);var a=(u=Object.assign({},l,(0,n.useContext)(d),u)).initialSize,s=void 0===a?1:a,f=u.revalidateAll,v=void 0!==f&&f,h=u.persistSize,p=void 0!==h&&h,y=u.fetcher,g=D(u,["initialSize","revalidateAll","persistSize","fetcher"]);void 0===o&&(o=y);var b=null;try{b=c.serializeKey(i(0,null))[0]}catch(e){}var m=(0,n.useState)(!1)[1],w=null;b&&(w="context@"+b);var O,_=null;b&&(_="size@"+b,O=c.get(_));var S=(0,n.useRef)(O||s),k=(0,n.useRef)(!1);(0,n.useEffect)((function(){k.current?p||(S.current=s):k.current=!0}),[b]);var x=j(b?["many",b]:null,(function(){return T(e,void 0,void 0,(function(){var e,t,r,n,a,s,l,f,d,h;return z(this,(function(p){switch(p.label){case 0:e=c.get(w)||{},t=e.originalData,r=e.force,n=[],a=null,s=0,p.label=1;case 1:return s<S.current?(l=c.serializeKey(i(s,a)),f=l[0],d=l[1],f?(h=c.get(f),v||r||void 0===r&&0===s||t&&!u.compare(t[s],h)||void 0===h?null===d?[3,3]:[4,o.apply(void 0,d)]:[3,6]):[3,8]):[3,8];case 2:return h=p.sent(),[3,5];case 3:return[4,o(f)];case 4:h=p.sent(),p.label=5;case 5:c.set(f,h),p.label=6;case 6:n.push(h),a=h,p.label=7;case 7:return++s,[3,1];case 8:return c.delete(w),[2,n]}}))}))}),g),R=(0,n.useRef)(x.data);(0,n.useEffect)((function(){R.current=x.data}),[x.data]);var E=(0,n.useCallback)((function(e,t){if(void 0===t&&(t=!0),t&&void 0!==e){var r=R.current;c.set(w,{originalData:r,force:!1})}else t&&c.set(w,{force:!0});return x.mutate(e,t)}),[x.mutate,w]),V=S.current,I=(0,n.useCallback)((function(e){return"function"==typeof e?S.current=e(S.current):"number"==typeof e&&(S.current=e),c.set(_,S.current),m((function(e){return!e})),E((function(e){return e}))}),[E,_]);return C(C({},x),{mutate:E,size:V,setSize:I})}const P=j}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly80MmJvYXJkLWZyb250Ly4vbm9kZV9tb2R1bGVzL2RlcXVhbC9saXRlL2luZGV4Lm1qcyIsIndlYnBhY2s6Ly80MmJvYXJkLWZyb250Ly4vbm9kZV9tb2R1bGVzL3N3ci9lc20vbGlicy9oYXNoLmpzIiwid2VicGFjazovLzQyYm9hcmQtZnJvbnQvLi9ub2RlX21vZHVsZXMvc3dyL2VzbS9saWJzL3dlYi1wcmVzZXQuanMiLCJ3ZWJwYWNrOi8vNDJib2FyZC1mcm9udC8uL25vZGVfbW9kdWxlcy9zd3IvZXNtL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly80MmJvYXJkLWZyb250Ly4vbm9kZV9tb2R1bGVzL3N3ci9lc20vY2FjaGUuanMiLCJ3ZWJwYWNrOi8vNDJib2FyZC1mcm9udC8uL25vZGVfbW9kdWxlcy9zd3IvZXNtL3N3ci1jb25maWctY29udGV4dC5qcyIsIndlYnBhY2s6Ly80MmJvYXJkLWZyb250Ly4vbm9kZV9tb2R1bGVzL3N3ci9lc20vdXNlLXN3ci5qcyIsIndlYnBhY2s6Ly80MmJvYXJkLWZyb250Ly4vbm9kZV9tb2R1bGVzL3N3ci9lc20vdXNlLXN3ci1pbmZpbml0ZS5qcyIsIndlYnBhY2s6Ly80MmJvYXJkLWZyb250Ly4vbm9kZV9tb2R1bGVzL3N3ci9lc20vaW5kZXguanMiXSwibmFtZXMiOlsiaGFzIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJ0YWJsZSIsIldlYWtNYXAiLCJjb3VudGVyIiwiaXNPbmxpbmUiLCJuYXZpZ2F0b3IiLCJvbkxpbmUiLCJpc0RvY3VtZW50VmlzaWJsZSIsImRvY3VtZW50IiwidmlzaWJpbGl0eVN0YXRlIiwiZmV0Y2hlciIsInVybCIsImZldGNoIiwidGhlbiIsInJlcyIsImpzb24iLCJDYWNoZSIsImluaXRpYWxEYXRhIiwidGhpcyIsIl9fY2FjaGUiLCJNYXAiLCJlbnRyaWVzIiwiX19saXN0ZW5lcnMiLCJnZXQiLCJrZXkiLCJfa2V5Iiwic2VyaWFsaXplS2V5Iiwic2V0IiwidmFsdWUiLCJub3RpZnkiLCJrZXlzIiwiQXJyYXkiLCJmcm9tIiwiY2xlYXIiLCJkZWxldGUiLCJhcmdzIiwiZXJyIiwiaXNBcnJheSIsImxlbmd0aCIsImkiLCJfaGFzaCIsIlN0cmluZyIsImhhc2giLCJzdWJzY3JpYmUiLCJsaXN0ZW5lciIsIl90aGlzIiwiRXJyb3IiLCJpc1N1YnNjcmliZWQiLCJwdXNoIiwiaW5kZXgiLCJpbmRleE9mIiwiX2kiLCJfYSIsInNsb3dDb25uZWN0aW9uIiwid2luZG93IiwiZWZmZWN0aXZlVHlwZSIsIm9uTG9hZGluZ1Nsb3ciLCJvblN1Y2Nlc3MiLCJvbkVycm9yIiwib25FcnJvclJldHJ5IiwiXyIsIl9fIiwiY29uZmlnIiwicmV2YWxpZGF0ZSIsIm9wdHMiLCJlcnJvclJldHJ5Q291bnQiLCJyZXRyeUNvdW50IiwiY291bnQiLCJNYXRoIiwibWluIiwidGltZW91dCIsInJhbmRvbSIsImVycm9yUmV0cnlJbnRlcnZhbCIsInNldFRpbWVvdXQiLCJmb2N1c1Rocm90dGxlSW50ZXJ2YWwiLCJkZWR1cGluZ0ludGVydmFsIiwibG9hZGluZ1RpbWVvdXQiLCJyZWZyZXNoSW50ZXJ2YWwiLCJyZXZhbGlkYXRlT25Gb2N1cyIsInJldmFsaWRhdGVPblJlY29ubmVjdCIsInJlZnJlc2hXaGVuSGlkZGVuIiwicmVmcmVzaFdoZW5PZmZsaW5lIiwic2hvdWxkUmV0cnlPbkVycm9yIiwic3VzcGVuc2UiLCJjb21wYXJlIiwiZGVxdWFsIiwiZm9vIiwiYmFyIiwiY3RvciIsImxlbiIsImNvbnN0cnVjdG9yIiwiRGF0ZSIsImdldFRpbWUiLCJSZWdFeHAiLCJ0b1N0cmluZyIsImNhbGwiLCJTV1JDb25maWdDb250ZXh0IiwiY3JlYXRlQ29udGV4dCIsImRpc3BsYXlOYW1lIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJhcHBseSIsIl9fZ2VuZXJhdG9yIiwiYm9keSIsImYiLCJ5IiwidCIsImciLCJsYWJlbCIsInNlbnQiLCJ0cnlzIiwib3BzIiwidmVyYiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibiIsInYiLCJvcCIsIlR5cGVFcnJvciIsInBvcCIsIklTX1NFUlZFUiIsInJJQyIsInVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QiLCJ1c2VFZmZlY3QiLCJ1c2VMYXlvdXRFZmZlY3QiLCJDT05DVVJSRU5UX1BST01JU0VTIiwiQ09OQ1VSUkVOVF9QUk9NSVNFU19UUyIsIkZPQ1VTX1JFVkFMSURBVE9SUyIsIlJFQ09OTkVDVF9SRVZBTElEQVRPUlMiLCJDQUNIRV9SRVZBTElEQVRPUlMiLCJNVVRBVElPTl9UUyIsIk1VVEFUSU9OX0VORF9UUyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZXZhbGlkYXRlXzEiLCJyZXZhbGlkYXRvcnMiLCJ0cmlnZ2VyIiwic2hvdWxkUmV2YWxpZGF0ZSIsImtleUVyciIsImtleVZhbGlkYXRpbmciLCJ1cGRhdGVycyIsImN1cnJlbnREYXRhIiwiY3VycmVudEVycm9yIiwiY3VycmVudElzVmFsaWRhdGluZyIsInByb21pc2VzIiwiYWxsIiwiYnJvYWRjYXN0U3RhdGUiLCJkYXRhIiwiZXJyb3IiLCJpc1ZhbGlkYXRpbmciLCJtdXRhdGUiLCJfZGF0YSIsImJlZm9yZU11dGF0aW9uVHMiLCJiZWZvcmVDb25jdXJyZW50UHJvbWlzZXNUcyIsImVycl8xIiwiZXJyXzIiLCJfYiIsIm5vdyIsInVuZGVmaW5lZCIsImFyZ3VtZW50cyIsImZuIiwiZm5BcmdzIiwiYXNzaWduIiwidXNlQ29udGV4dCIsImNvbmZpZ1JlZiIsInVzZVJlZiIsImN1cnJlbnQiLCJyZXNvbHZlRGF0YSIsImNhY2hlZERhdGEiLCJpbml0aWFsRXJyb3IiLCJpbml0aWFsSXNWYWxpZGF0aW5nIiwic3RhdGVEZXBlbmRlbmNpZXMiLCJzdGF0ZVJlZiIsInVzZURlYnVnVmFsdWUiLCJyZXJlbmRlciIsInVzZVN0YXRlIiwiZGlzcGF0Y2giLCJ1c2VDYWxsYmFjayIsInBheWxvYWQiLCJzaG91bGRVcGRhdGVTdGF0ZSIsImsiLCJ1bm1vdW50ZWRSZWYiLCJrZXlSZWYiLCJldmVudHNSZWYiLCJlbWl0IiwiZXZlbnQiLCJwYXJhbXMiLCJib3VuZE11dGF0ZSIsImFkZFJldmFsaWRhdG9yIiwiY2FsbGJhY2siLCJyZW1vdmVSZXZhbGlkYXRvciIsInJldmxpZGF0b3JzIiwicmV2YWxpZGF0ZU9wdHMiLCJsb2FkaW5nIiwic2hvdWxkRGVkdXBpbmciLCJuZXdEYXRhIiwic3RhcnRBdCIsIm5ld1N0YXRlIiwiZXJyXzMiLCJkZWR1cGUiLCJjdXJyZW50SG9va0RhdGEiLCJsYXRlc3RLZXllZERhdGEiLCJzb2Z0UmV2YWxpZGF0ZSIsInJldmFsaWRhdGVPbk1vdW50IiwicGVuZGluZyIsIm9uRm9jdXMiLCJvblJlY29ubmVjdCIsIm9uVXBkYXRlIiwidXBkYXRlZERhdGEiLCJ1cGRhdGVkRXJyb3IiLCJ1cGRhdGVkSXNWYWxpZGF0aW5nIiwibmVlZFVwZGF0ZSIsInRpbWVyIiwidGljayIsImNsZWFyVGltZW91dCIsIm1lbW9pemVkU3RhdGUiLCJ1c2VNZW1vIiwic3RhdGUiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZW51bWVyYWJsZSIsImxhdGVzdERhdGEiLCJsYXRlc3RFcnJvciIsIl9fYXNzaWduIiwicyIsInAiLCJfX3Jlc3QiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsInVzZVNXUkluZmluaXRlIiwiZ2V0S2V5IiwiaW5pdGlhbFNpemUiLCJyZXZhbGlkYXRlQWxsIiwiX2MiLCJwZXJzaXN0U2l6ZSIsImRlZmF1bHRGZXRjaGVyIiwiZXh0cmFDb25maWciLCJmaXJzdFBhZ2VLZXkiLCJjb250ZXh0Q2FjaGVLZXkiLCJjYWNoZWRQYWdlU2l6ZSIsInBhZ2VDb3VudENhY2hlS2V5IiwicGFnZUNvdW50UmVmIiwiZGlkTW91bnRSZWYiLCJzd3IiLCJvcmlnaW5hbERhdGEiLCJmb3JjZSIsInByZXZpb3VzUGFnZURhdGEiLCJwYWdlS2V5IiwicGFnZUFyZ3MiLCJwYWdlRGF0YSIsImRhdGFSZWYiLCJzaXplIiwic2V0U2l6ZSIsImFyZyJdLCJtYXBwaW5ncyI6IndKQUFJQSxFQUFNQyxPQUFPQyxVQUFVQyxlQ0l2QkMsRUFBUSxJQUFJQyxRQUVaQyxFQUFVLEVDVWQsU0FDSUMsU0FqQkosV0FDSSxZQUFnQyxJQUFyQkMsVUFBVUMsUUFDVkQsVUFBVUMsUUFnQnJCQyxrQkFYSixXQUNJLE1BQXdCLG9CQUFiQyxlQUM2QixJQUE3QkEsU0FBU0MsaUJBQ29CLFdBQTdCRCxTQUFTQyxpQkFTcEJDLFFBSlUsU0FBVUMsR0FBTyxPQUFPQyxNQUFNRCxHQUFLRSxNQUFLLFNBQVVDLEdBQU8sT0FBT0EsRUFBSUMsWUNYbEYsSUFBSSxFQUFRLElDSGUsV0FDdkIsU0FBU0MsRUFBTUMsUUFDUyxJQUFoQkEsSUFBMEJBLEVBQWMsSUFDNUNDLEtBQUtDLFFBQVUsSUFBSUMsSUFBSXRCLE9BQU91QixRQUFRSixJQUN0Q0MsS0FBS0ksWUFBYyxHQTZFdkIsT0EzRUFOLEVBQU1qQixVQUFVd0IsSUFBTSxTQUFVQyxHQUM1QixJQUFJQyxFQUFPUCxLQUFLUSxhQUFhRixHQUFLLEdBQ2xDLE9BQU9OLEtBQUtDLFFBQVFJLElBQUlFLElBRTVCVCxFQUFNakIsVUFBVTRCLElBQU0sU0FBVUgsRUFBS0ksR0FDakMsSUFBSUgsRUFBT1AsS0FBS1EsYUFBYUYsR0FBSyxHQUNsQ04sS0FBS0MsUUFBUVEsSUFBSUYsRUFBTUcsR0FDdkJWLEtBQUtXLFVBRVRiLEVBQU1qQixVQUFVK0IsS0FBTyxXQUNuQixPQUFPQyxNQUFNQyxLQUFLZCxLQUFLQyxRQUFRVyxTQUVuQ2QsRUFBTWpCLFVBQVVGLElBQU0sU0FBVTJCLEdBQzVCLElBQUlDLEVBQU9QLEtBQUtRLGFBQWFGLEdBQUssR0FDbEMsT0FBT04sS0FBS0MsUUFBUXRCLElBQUk0QixJQUU1QlQsRUFBTWpCLFVB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QmlDLEdBQU8sU0FBVWpDLEdBQUssT0FBT0EsT0FDckMsQ0FBQ2lDLEVBQVF5RixJQUNaLE9BQU9qQixFQUFTQSxFQUFTLEdBQUlvQixHQUFNLENBQUU1RixPQUFRQSxFQUN6Q29HLEtBQU1BLEVBQ05DLFFBQVNBLElDaE5qQiIsImZpbGUiOiI5MDIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuZXhwb3J0IGZ1bmN0aW9uIGRlcXVhbChmb28sIGJhcikge1xuXHR2YXIgY3RvciwgbGVuO1xuXHRpZiAoZm9vID09PSBiYXIpIHJldHVybiB0cnVlO1xuXG5cdGlmIChmb28gJiYgYmFyICYmIChjdG9yPWZvby5jb25zdHJ1Y3RvcikgPT09IGJhci5jb25zdHJ1Y3Rvcikge1xuXHRcdGlmIChjdG9yID09PSBEYXRlKSByZXR1cm4gZm9vLmdldFRpbWUoKSA9PT0gYmFyLmdldFRpbWUoKTtcblx0XHRpZiAoY3RvciA9PT0gUmVnRXhwKSByZXR1cm4gZm9vLnRvU3RyaW5nKCkgPT09IGJhci50b1N0cmluZygpO1xuXG5cdFx0aWYgKGN0b3IgPT09IEFycmF5KSB7XG5cdFx0XHRpZiAoKGxlbj1mb28ubGVuZ3RoKSA9PT0gYmFyLmxlbmd0aCkge1xuXHRcdFx0XHR3aGlsZSAobGVuLS0gJiYgZGVxdWFsKGZvb1tsZW5dLCBiYXJbbGVuXSkpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGxlbiA9PT0gLTE7XG5cdFx0fVxuXG5cdFx0aWYgKCFjdG9yIHx8IHR5cGVvZiBmb28gPT09ICdvYmplY3QnKSB7XG5cdFx0XHRsZW4gPSAwO1xuXHRcdFx0Zm9yIChjdG9yIGluIGZvbykge1xuXHRcdFx0XHRpZiAoaGFzLmNhbGwoZm9vLCBjdG9yKSAmJiArK2xlbiAmJiAhaGFzLmNhbGwoYmFyLCBjdG9yKSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZiAoIShjdG9yIGluIGJhcikgfHwgIWRlcXVhbChmb29bY3Rvcl0sIGJhcltjdG9yXSkpIHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBPYmplY3Qua2V5cyhiYXIpLmxlbmd0aCA9PT0gbGVuO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBmb28gIT09IGZvbyAmJiBiYXIgIT09IGJhcjtcbn1cbiIsIi8vIHVzZSBXZWFrTWFwIHRvIHN0b3JlIHRoZSBvYmplY3QtPmtleSBtYXBwaW5nXG4vLyBzbyB0aGUgb2JqZWN0cyBjYW4gYmUgZ2FyYmFnZSBjb2xsZWN0ZWQuXG4vLyBXZWFrTWFwIHVzZXMgYSBoYXNodGFibGUgdW5kZXIgdGhlIGhvb2QsIHNvIHRoZSBsb29rdXBcbi8vIGNvbXBsZXhpdHkgaXMgYWxtb3N0IE8oMSkuXG52YXIgdGFibGUgPSBuZXcgV2Vha01hcCgpO1xuLy8gY291bnRlciBvZiB0aGUga2V5XG52YXIgY291bnRlciA9IDA7XG4vLyBoYXNoZXMgYW4gYXJyYXkgb2Ygb2JqZWN0cyBhbmQgcmV0dXJucyBhIHN0cmluZ1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaGFzaChhcmdzKSB7XG4gICAgaWYgKCFhcmdzLmxlbmd0aClcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIHZhciBrZXkgPSAnYXJnJztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIF9oYXNoID0gdm9pZCAwO1xuICAgICAgICBpZiAoYXJnc1tpXSA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgKHR5cGVvZiBhcmdzW2ldICE9PSAnb2JqZWN0JyAmJiB0eXBlb2YgYXJnc1tpXSAhPT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgICAgIC8vIG5lZWQgdG8gY29uc2lkZXIgdGhlIGNhc2UgdGhhdCBhcmdzW2ldIGlzIGEgc3RyaW5nOlxuICAgICAgICAgICAgLy8gYXJnc1tpXSAgICAgICAgX2hhc2hcbiAgICAgICAgICAgIC8vIFwidW5kZWZpbmVkXCIgLT4gJ1widW5kZWZpbmVkXCInXG4gICAgICAgICAgICAvLyB1bmRlZmluZWQgICAtPiAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgLy8gMTIzICAgICAgICAgLT4gJzEyMydcbiAgICAgICAgICAgIC8vIG51bGwgICAgICAgIC0+ICdudWxsJ1xuICAgICAgICAgICAgLy8gXCJudWxsXCIgICAgICAtPiAnXCJudWxsXCInXG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbaV0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgX2hhc2ggPSAnXCInICsgYXJnc1tpXSArICdcIic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfaGFzaCA9IFN0cmluZyhhcmdzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdGFibGUuaGFzKGFyZ3NbaV0pKSB7XG4gICAgICAgICAgICAgICAgX2hhc2ggPSBjb3VudGVyO1xuICAgICAgICAgICAgICAgIHRhYmxlLnNldChhcmdzW2ldLCBjb3VudGVyKyspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX2hhc2ggPSB0YWJsZS5nZXQoYXJnc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAga2V5ICs9ICdAJyArIF9oYXNoO1xuICAgIH1cbiAgICByZXR1cm4ga2V5O1xufVxuIiwiZnVuY3Rpb24gaXNPbmxpbmUoKSB7XG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3Iub25MaW5lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm9uTGluZTtcbiAgICB9XG4gICAgLy8gYWx3YXlzIGFzc3VtZSBpdCdzIG9ubGluZVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gaXNEb2N1bWVudFZpc2libGUoKSB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgdHlwZW9mIGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSAhPT0gJ2hpZGRlbic7XG4gICAgfVxuICAgIC8vIGFsd2F5cyBhc3N1bWUgaXQncyB2aXNpYmxlXG4gICAgcmV0dXJuIHRydWU7XG59XG52YXIgZmV0Y2hlciA9IGZ1bmN0aW9uICh1cmwpIHsgcmV0dXJuIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiByZXMuanNvbigpOyB9KTsgfTtcbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBpc09ubGluZTogaXNPbmxpbmUsXG4gICAgaXNEb2N1bWVudFZpc2libGU6IGlzRG9jdW1lbnRWaXNpYmxlLFxuICAgIGZldGNoZXI6IGZldGNoZXJcbn07XG4iLCJpbXBvcnQgeyBkZXF1YWwgfSBmcm9tICdkZXF1YWwvbGl0ZSc7XG5pbXBvcnQgQ2FjaGUgZnJvbSAnLi9jYWNoZSc7XG5pbXBvcnQgd2ViUHJlc2V0IGZyb20gJy4vbGlicy93ZWItcHJlc2V0Jztcbi8vIGNhY2hlXG52YXIgY2FjaGUgPSBuZXcgQ2FjaGUoKTtcbi8vIGVycm9yIHJldHJ5XG5mdW5jdGlvbiBvbkVycm9yUmV0cnkoXywgX18sIGNvbmZpZywgcmV2YWxpZGF0ZSwgb3B0cykge1xuICAgIGlmICghY29uZmlnLmlzRG9jdW1lbnRWaXNpYmxlKCkpIHtcbiAgICAgICAgLy8gaWYgaXQncyBoaWRkZW4sIHN0b3BcbiAgICAgICAgLy8gaXQgd2lsbCBhdXRvIHJldmFsaWRhdGUgd2hlbiBmb2N1c1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY29uZmlnLmVycm9yUmV0cnlDb3VudCA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgb3B0cy5yZXRyeUNvdW50ID4gY29uZmlnLmVycm9yUmV0cnlDb3VudCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGV4cG9uZW50aWFsIGJhY2tvZmZcbiAgICB2YXIgY291bnQgPSBNYXRoLm1pbihvcHRzLnJldHJ5Q291bnQgfHwgMCwgOCk7XG4gICAgdmFyIHRpbWVvdXQgPSB+figoTWF0aC5yYW5kb20oKSArIDAuNSkgKiAoMSA8PCBjb3VudCkpICogY29uZmlnLmVycm9yUmV0cnlJbnRlcnZhbDtcbiAgICBzZXRUaW1lb3V0KHJldmFsaWRhdGUsIHRpbWVvdXQsIG9wdHMpO1xufVxuLy8gY2xpZW50IHNpZGU6IG5lZWQgdG8gYWRqdXN0IHRoZSBjb25maWdcbi8vIGJhc2VkIG9uIHRoZSBicm93c2VyIHN0YXR1c1xuLy8gc2xvdyBjb25uZWN0aW9uICg8PSA3MEticHMpXG52YXIgc2xvd0Nvbm5lY3Rpb24gPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIG5hdmlnYXRvclsnY29ubmVjdGlvbiddICYmXG4gICAgWydzbG93LTJnJywgJzJnJ10uaW5kZXhPZihuYXZpZ2F0b3JbJ2Nvbm5lY3Rpb24nXS5lZmZlY3RpdmVUeXBlKSAhPT0gLTE7XG4vLyBjb25maWdcbnZhciBkZWZhdWx0Q29uZmlnID0ge1xuICAgIC8vIGV2ZW50c1xuICAgIG9uTG9hZGluZ1Nsb3c6IGZ1bmN0aW9uICgpIHsgfSxcbiAgICBvblN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHsgfSxcbiAgICBvbkVycm9yOiBmdW5jdGlvbiAoKSB7IH0sXG4gICAgb25FcnJvclJldHJ5OiBvbkVycm9yUmV0cnksXG4gICAgZXJyb3JSZXRyeUludGVydmFsOiAoc2xvd0Nvbm5lY3Rpb24gPyAxMCA6IDUpICogMTAwMCxcbiAgICBmb2N1c1Rocm90dGxlSW50ZXJ2YWw6IDUgKiAxMDAwLFxuICAgIGRlZHVwaW5nSW50ZXJ2YWw6IDIgKiAxMDAwLFxuICAgIGxvYWRpbmdUaW1lb3V0OiAoc2xvd0Nvbm5lY3Rpb24gPyA1IDogMykgKiAxMDAwLFxuICAgIHJlZnJlc2hJbnRlcnZhbDogMCxcbiAgICByZXZhbGlkYXRlT25Gb2N1czogdHJ1ZSxcbiAgICByZXZhbGlkYXRlT25SZWNvbm5lY3Q6IHRydWUsXG4gICAgcmVmcmVzaFdoZW5IaWRkZW46IGZhbHNlLFxuICAgIHJlZnJlc2hXaGVuT2ZmbGluZTogZmFsc2UsXG4gICAgc2hvdWxkUmV0cnlPbkVycm9yOiB0cnVlLFxuICAgIHN1c3BlbnNlOiBmYWxzZSxcbiAgICBjb21wYXJlOiBkZXF1YWwsXG4gICAgZmV0Y2hlcjogd2ViUHJlc2V0LmZldGNoZXIsXG4gICAgaXNPbmxpbmU6IHdlYlByZXNldC5pc09ubGluZSxcbiAgICBpc0RvY3VtZW50VmlzaWJsZTogd2ViUHJlc2V0LmlzRG9jdW1lbnRWaXNpYmxlXG59O1xuZXhwb3J0IHsgY2FjaGUgfTtcbmV4cG9ydCBkZWZhdWx0IGRlZmF1bHRDb25maWc7XG4iLCJpbXBvcnQgaGFzaCBmcm9tICcuL2xpYnMvaGFzaCc7XG52YXIgQ2FjaGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2FjaGUoaW5pdGlhbERhdGEpIHtcbiAgICAgICAgaWYgKGluaXRpYWxEYXRhID09PSB2b2lkIDApIHsgaW5pdGlhbERhdGEgPSB7fTsgfVxuICAgICAgICB0aGlzLl9fY2FjaGUgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGluaXRpYWxEYXRhKSk7XG4gICAgICAgIHRoaXMuX19saXN0ZW5lcnMgPSBbXTtcbiAgICB9XG4gICAgQ2FjaGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIF9rZXkgPSB0aGlzLnNlcmlhbGl6ZUtleShrZXkpWzBdO1xuICAgICAgICByZXR1cm4gdGhpcy5fX2NhY2hlLmdldChfa2V5KTtcbiAgICB9O1xuICAgIENhY2hlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICB2YXIgX2tleSA9IHRoaXMuc2VyaWFsaXplS2V5KGtleSlbMF07XG4gICAgICAgIHRoaXMuX19jYWNoZS5zZXQoX2tleSwgdmFsdWUpO1xuICAgICAgICB0aGlzLm5vdGlmeSgpO1xuICAgIH07XG4gICAgQ2FjaGUucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX19jYWNoZS5rZXlzKCkpO1xuICAgIH07XG4gICAgQ2FjaGUucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIF9rZXkgPSB0aGlzLnNlcmlhbGl6ZUtleShrZXkpWzBdO1xuICAgICAgICByZXR1cm4gdGhpcy5fX2NhY2hlLmhhcyhfa2V5KTtcbiAgICB9O1xuICAgIENhY2hlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fX2NhY2hlLmNsZWFyKCk7XG4gICAgICAgIHRoaXMubm90aWZ5KCk7XG4gICAgfTtcbiAgICBDYWNoZS5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgX2tleSA9IHRoaXMuc2VyaWFsaXplS2V5KGtleSlbMF07XG4gICAgICAgIHRoaXMuX19jYWNoZS5kZWxldGUoX2tleSk7XG4gICAgICAgIHRoaXMubm90aWZ5KCk7XG4gICAgfTtcbiAgICAvLyBUT0RPOiBpbnRyb2R1Y2UgbmFtZXNwYWNlIGZvciB0aGUgY2FjaGVcbiAgICBDYWNoZS5wcm90b3R5cGUuc2VyaWFsaXplS2V5ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgYXJncyA9IG51bGw7XG4gICAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGtleSA9IGtleSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIC8vIGRlcGVuZGVuY2llcyBub3QgcmVhZHlcbiAgICAgICAgICAgICAgICBrZXkgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShrZXkpKSB7XG4gICAgICAgICAgICAvLyBhcmdzIGFycmF5XG4gICAgICAgICAgICBhcmdzID0ga2V5O1xuICAgICAgICAgICAga2V5ID0gaGFzaChrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gY29udmVydCBudWxsIHRvICcnXG4gICAgICAgICAgICBrZXkgPSBTdHJpbmcoa2V5IHx8ICcnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZXJyb3JLZXkgPSBrZXkgPyAnZXJyQCcgKyBrZXkgOiAnJztcbiAgICAgICAgdmFyIGlzVmFsaWRhdGluZ0tleSA9IGtleSA/ICd2YWxpZGF0aW5nQCcgKyBrZXkgOiAnJztcbiAgICAgICAgcmV0dXJuIFtrZXksIGFyZ3MsIGVycm9yS2V5LCBpc1ZhbGlkYXRpbmdLZXldO1xuICAgIH07XG4gICAgQ2FjaGUucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHRoZSBsaXN0ZW5lciB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpc1N1YnNjcmliZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9fbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFpc1N1YnNjcmliZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaXNTdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBfdGhpcy5fX2xpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX19saXN0ZW5lcnNbaW5kZXhdID0gX3RoaXMuX19saXN0ZW5lcnNbX3RoaXMuX19saXN0ZW5lcnMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgX3RoaXMuX19saXN0ZW5lcnMubGVuZ3RoLS07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvLyBOb3RpZnkgQ2FjaGUgc3Vic2NyaWJlcnMgYWJvdXQgYSBjaGFuZ2UgaW4gdGhlIGNhY2hlXG4gICAgQ2FjaGUucHJvdG90eXBlLm5vdGlmeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuX19saXN0ZW5lcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBfYVtfaV07XG4gICAgICAgICAgICBsaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQ2FjaGU7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgQ2FjaGU7XG4iLCJpbXBvcnQgeyBjcmVhdGVDb250ZXh0IH0gZnJvbSAncmVhY3QnO1xudmFyIFNXUkNvbmZpZ0NvbnRleHQgPSBjcmVhdGVDb250ZXh0KHt9KTtcblNXUkNvbmZpZ0NvbnRleHQuZGlzcGxheU5hbWUgPSAnU1dSQ29uZmlnQ29udGV4dCc7XG5leHBvcnQgZGVmYXVsdCBTV1JDb25maWdDb250ZXh0O1xuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZUxheW91dEVmZmVjdCwgdXNlU3RhdGUsIHVzZVJlZiwgdXNlTWVtbywgdXNlRGVidWdWYWx1ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBkZWZhdWx0Q29uZmlnLCB7IGNhY2hlIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IFNXUkNvbmZpZ0NvbnRleHQgZnJvbSAnLi9zd3ItY29uZmlnLWNvbnRleHQnO1xudmFyIElTX1NFUlZFUiA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnO1xuLy8gcG9seWZpbGwgZm9yIHJlcXVlc3RJZGxlQ2FsbGJhY2tcbnZhciBySUMgPSBJU19TRVJWRVJcbiAgICA/IG51bGxcbiAgICA6IHdpbmRvd1sncmVxdWVzdElkbGVDYWxsYmFjayddIHx8IChmdW5jdGlvbiAoZikgeyByZXR1cm4gc2V0VGltZW91dChmLCAxKTsgfSk7XG4vLyBSZWFjdCBjdXJyZW50bHkgdGhyb3dzIGEgd2FybmluZyB3aGVuIHVzaW5nIHVzZUxheW91dEVmZmVjdCBvbiB0aGUgc2VydmVyLlxuLy8gVG8gZ2V0IGFyb3VuZCBpdCwgd2UgY2FuIGNvbmRpdGlvbmFsbHkgdXNlRWZmZWN0IG9uIHRoZSBzZXJ2ZXIgKG5vLW9wKSBhbmRcbi8vIHVzZUxheW91dEVmZmVjdCBpbiB0aGUgYnJvd3Nlci5cbnZhciB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0ID0gSVNfU0VSVkVSID8gdXNlRWZmZWN0IDogdXNlTGF5b3V0RWZmZWN0O1xuLy8gZ2xvYmFsIHN0YXRlIG1hbmFnZXJzXG52YXIgQ09OQ1VSUkVOVF9QUk9NSVNFUyA9IHt9O1xudmFyIENPTkNVUlJFTlRfUFJPTUlTRVNfVFMgPSB7fTtcbnZhciBGT0NVU19SRVZBTElEQVRPUlMgPSB7fTtcbnZhciBSRUNPTk5FQ1RfUkVWQUxJREFUT1JTID0ge307XG52YXIgQ0FDSEVfUkVWQUxJREFUT1JTID0ge307XG52YXIgTVVUQVRJT05fVFMgPSB7fTtcbnZhciBNVVRBVElPTl9FTkRfVFMgPSB7fTtcbi8vIHNldHVwIERPTSBldmVudHMgbGlzdGVuZXJzIGZvciBgZm9jdXNgIGFuZCBgcmVjb25uZWN0YCBhY3Rpb25zXG5pZiAoIUlTX1NFUlZFUiAmJiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgIHZhciByZXZhbGlkYXRlXzEgPSBmdW5jdGlvbiAocmV2YWxpZGF0b3JzKSB7XG4gICAgICAgIGlmICghZGVmYXVsdENvbmZpZy5pc0RvY3VtZW50VmlzaWJsZSgpIHx8ICFkZWZhdWx0Q29uZmlnLmlzT25saW5lKCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGZvciAodmFyIGtleSBpbiByZXZhbGlkYXRvcnMpIHtcbiAgICAgICAgICAgIGlmIChyZXZhbGlkYXRvcnNba2V5XVswXSlcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRvcnNba2V5XVswXSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBmb2N1cyByZXZhbGlkYXRlXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBmdW5jdGlvbiAoKSB7IHJldHVybiByZXZhbGlkYXRlXzEoRk9DVVNfUkVWQUxJREFUT1JTKTsgfSwgZmFsc2UpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJldmFsaWRhdGVfMShGT0NVU19SRVZBTElEQVRPUlMpOyB9LCBmYWxzZSk7XG4gICAgLy8gcmVjb25uZWN0IHJldmFsaWRhdGVcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb25saW5lJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gcmV2YWxpZGF0ZV8xKFJFQ09OTkVDVF9SRVZBTElEQVRPUlMpOyB9LCBmYWxzZSk7XG59XG52YXIgdHJpZ2dlciA9IGZ1bmN0aW9uIChfa2V5LCBzaG91bGRSZXZhbGlkYXRlKSB7XG4gICAgaWYgKHNob3VsZFJldmFsaWRhdGUgPT09IHZvaWQgMCkgeyBzaG91bGRSZXZhbGlkYXRlID0gdHJ1ZTsgfVxuICAgIC8vIHdlIGFyZSBpZ25vcmluZyB0aGUgc2Vjb25kIGFyZ3VtZW50IHdoaWNoIGNvcnJlc3BvbmQgdG8gdGhlIGFyZ3VtZW50c1xuICAgIC8vIHRoZSBmZXRjaGVyIHdpbGwgcmVjZWl2ZSB3aGVuIGtleSBpcyBhbiBhcnJheVxuICAgIHZhciBfYSA9IGNhY2hlLnNlcmlhbGl6ZUtleShfa2V5KSwga2V5ID0gX2FbMF0sIGtleUVyciA9IF9hWzJdLCBrZXlWYWxpZGF0aW5nID0gX2FbM107XG4gICAgaWYgKCFrZXkpXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB2YXIgdXBkYXRlcnMgPSBDQUNIRV9SRVZBTElEQVRPUlNba2V5XTtcbiAgICBpZiAoa2V5ICYmIHVwZGF0ZXJzKSB7XG4gICAgICAgIHZhciBjdXJyZW50RGF0YSA9IGNhY2hlLmdldChrZXkpO1xuICAgICAgICB2YXIgY3VycmVudEVycm9yID0gY2FjaGUuZ2V0KGtleUVycik7XG4gICAgICAgIHZhciBjdXJyZW50SXNWYWxpZGF0aW5nID0gY2FjaGUuZ2V0KGtleVZhbGlkYXRpbmcpO1xuICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1cGRhdGVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh1cGRhdGVyc1tpXShzaG91bGRSZXZhbGlkYXRlLCBjdXJyZW50RGF0YSwgY3VycmVudEVycm9yLCBjdXJyZW50SXNWYWxpZGF0aW5nLCBpID4gMCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJldHVybiBuZXcgdXBkYXRlZCB2YWx1ZVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gY2FjaGUuZ2V0KGtleSk7IH0pO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNhY2hlLmdldChrZXkpKTtcbn07XG52YXIgYnJvYWRjYXN0U3RhdGUgPSBmdW5jdGlvbiAoa2V5LCBkYXRhLCBlcnJvciwgaXNWYWxpZGF0aW5nKSB7XG4gICAgdmFyIHVwZGF0ZXJzID0gQ0FDSEVfUkVWQUxJREFUT1JTW2tleV07XG4gICAgaWYgKGtleSAmJiB1cGRhdGVycykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVwZGF0ZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB1cGRhdGVyc1tpXShmYWxzZSwgZGF0YSwgZXJyb3IsIGlzVmFsaWRhdGluZyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xudmFyIG11dGF0ZSA9IGZ1bmN0aW9uIChfa2V5LCBfZGF0YSwgc2hvdWxkUmV2YWxpZGF0ZSkge1xuICAgIGlmIChzaG91bGRSZXZhbGlkYXRlID09PSB2b2lkIDApIHsgc2hvdWxkUmV2YWxpZGF0ZSA9IHRydWU7IH1cbiAgICByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hLCBrZXksIGtleUVyciwgYmVmb3JlTXV0YXRpb25UcywgYmVmb3JlQ29uY3VycmVudFByb21pc2VzVHMsIGRhdGEsIGVycm9yLCBlcnJfMSwgZXJyXzIsIHVwZGF0ZXJzLCBwcm9taXNlcywgaTtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgX2EgPSBjYWNoZS5zZXJpYWxpemVLZXkoX2tleSksIGtleSA9IF9hWzBdLCBrZXlFcnIgPSBfYVsyXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFrZXkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIG5ldyBkYXRhLCBjYWxsIHJldmFsaWRhdGUgYWdhaW5zdCB0aGUga2V5XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgX2RhdGEgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRyaWdnZXIoX2tleSwgc2hvdWxkUmV2YWxpZGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdGltZXN0YW1wc1xuICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRpbWVzdGFtcHNcbiAgICAgICAgICAgICAgICAgICAgTVVUQVRJT05fVFNba2V5XSA9IERhdGUubm93KCkgLSAxO1xuICAgICAgICAgICAgICAgICAgICBNVVRBVElPTl9FTkRfVFNba2V5XSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZU11dGF0aW9uVHMgPSBNVVRBVElPTl9UU1trZXldO1xuICAgICAgICAgICAgICAgICAgICBiZWZvcmVDb25jdXJyZW50UHJvbWlzZXNUcyA9IENPTkNVUlJFTlRfUFJPTUlTRVNfVFNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2RhdGEgJiYgdHlwZW9mIF9kYXRhID09PSAnZnVuY3Rpb24nKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIF9iLnRyeXMucHVzaChbMSwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIF9kYXRhKGNhY2hlLmdldChrZXkpKV07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGVycl8xO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMyAvKmJyZWFrKi8sIDExXTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKF9kYXRhICYmIHR5cGVvZiBfZGF0YS50aGVuID09PSAnZnVuY3Rpb24nKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMTBdO1xuICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDY7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBfYi50cnlzLnB1c2goWzYsIDgsICwgOV0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBfZGF0YV07XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA5XTtcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIGVycl8yID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGVycl8yO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA5XTtcbiAgICAgICAgICAgICAgICBjYXNlIDk6IHJldHVybiBbMyAvKmJyZWFrKi8sIDExXTtcbiAgICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gX2RhdGE7XG4gICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMTE7XG4gICAgICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgb3RoZXIgbXV0YXRpb25zIGhhdmUgb2NjdXJyZWQgc2luY2Ugd2UndmUgc3RhcnRlZCBhd2FpdGluZywgaWYgc28gdGhlbiBkbyBub3QgcGVyc2lzdCB0aGlzIGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICBpZiAoYmVmb3JlTXV0YXRpb25UcyAhPT0gTVVUQVRJT05fVFNba2V5XSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgYmVmb3JlQ29uY3VycmVudFByb21pc2VzVHMgIT09IENPTkNVUlJFTlRfUFJPTUlTRVNfVFNba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGRhdGFdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBjYWNoZWQgZGF0YSwgYXZvaWQgbm90aWZ5aW5nIGZyb20gdGhlIGNhY2hlXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZS5zZXQoa2V5LCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYWNoZS5zZXQoa2V5RXJyLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IHRoZSB0aW1lc3RhbXAgdG8gbWFyayB0aGUgbXV0YXRpb24gaGFzIGVuZGVkXG4gICAgICAgICAgICAgICAgICAgIE1VVEFUSU9OX0VORF9UU1trZXldID0gRGF0ZS5ub3coKSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZXJzID0gQ0FDSEVfUkVWQUxJREFUT1JTW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB1cGRhdGVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2godXBkYXRlcnNbaV0oISFzaG91bGRSZXZhbGlkYXRlLCBkYXRhLCBlcnJvciwgdW5kZWZpbmVkLCBpID4gMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIG5ldyB1cGRhdGVkIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlLmdldChrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyB0aHJvdyBlcnJvciBvciByZXR1cm4gZGF0YSB0byBiZSB1c2VkIGJ5IGNhbGxlciBvZiBtdXRhdGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBkYXRhXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuZnVuY3Rpb24gdXNlU1dSKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciBfa2V5LCBmbiwgY29uZmlnID0ge307XG4gICAgaWYgKGFyZ3MubGVuZ3RoID49IDEpIHtcbiAgICAgICAgX2tleSA9IGFyZ3NbMF07XG4gICAgfVxuICAgIGlmIChhcmdzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgZm4gPSBhcmdzWzFdO1xuICAgICAgICBjb25maWcgPSBhcmdzWzJdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBmbiA9IGFyZ3NbMV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZ3NbMV0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjb25maWcgPSBhcmdzWzFdO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHdlIGFzc3VtZSBga2V5YCBhcyB0aGUgaWRlbnRpZmllciBvZiB0aGUgcmVxdWVzdFxuICAgIC8vIGBrZXlgIGNhbiBjaGFuZ2UgYnV0IGBmbmAgc2hvdWxkbid0XG4gICAgLy8gKGJlY2F1c2UgYHJldmFsaWRhdGVgIG9ubHkgZGVwZW5kcyBvbiBga2V5YClcbiAgICAvLyBga2V5RXJyYCBpcyB0aGUgY2FjaGUga2V5IGZvciBlcnJvciBvYmplY3RzXG4gICAgdmFyIF9hID0gY2FjaGUuc2VyaWFsaXplS2V5KF9rZXkpLCBrZXkgPSBfYVswXSwgZm5BcmdzID0gX2FbMV0sIGtleUVyciA9IF9hWzJdLCBrZXlWYWxpZGF0aW5nID0gX2FbM107XG4gICAgY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdENvbmZpZywgdXNlQ29udGV4dChTV1JDb25maWdDb250ZXh0KSwgY29uZmlnKTtcbiAgICB2YXIgY29uZmlnUmVmID0gdXNlUmVmKGNvbmZpZyk7XG4gICAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbmZpZ1JlZi5jdXJyZW50ID0gY29uZmlnO1xuICAgIH0pO1xuICAgIGlmICh0eXBlb2YgZm4gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIHVzZSB0aGUgZ2xvYmFsIGZldGNoZXJcbiAgICAgICAgZm4gPSBjb25maWcuZmV0Y2hlcjtcbiAgICB9XG4gICAgdmFyIHJlc29sdmVEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2FjaGVkRGF0YSA9IGNhY2hlLmdldChrZXkpO1xuICAgICAgICByZXR1cm4gdHlwZW9mIGNhY2hlZERhdGEgPT09ICd1bmRlZmluZWQnID8gY29uZmlnLmluaXRpYWxEYXRhIDogY2FjaGVkRGF0YTtcbiAgICB9O1xuICAgIHZhciBpbml0aWFsRGF0YSA9IHJlc29sdmVEYXRhKCk7XG4gICAgdmFyIGluaXRpYWxFcnJvciA9IGNhY2hlLmdldChrZXlFcnIpO1xuICAgIHZhciBpbml0aWFsSXNWYWxpZGF0aW5nID0gISFjYWNoZS5nZXQoa2V5VmFsaWRhdGluZyk7XG4gICAgLy8gaWYgYSBzdGF0ZSBpcyBhY2Nlc3NlZCAoZGF0YSwgZXJyb3Igb3IgaXNWYWxpZGF0aW5nKSxcbiAgICAvLyB3ZSBhZGQgdGhlIHN0YXRlIHRvIGRlcGVuZGVuY2llcyBzbyBpZiB0aGUgc3RhdGUgaXNcbiAgICAvLyB1cGRhdGVkIGluIHRoZSBmdXR1cmUsIHdlIGNhbiB0cmlnZ2VyIGEgcmVyZW5kZXJcbiAgICB2YXIgc3RhdGVEZXBlbmRlbmNpZXMgPSB1c2VSZWYoe1xuICAgICAgICBkYXRhOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGZhbHNlLFxuICAgICAgICBpc1ZhbGlkYXRpbmc6IGZhbHNlXG4gICAgfSk7XG4gICAgdmFyIHN0YXRlUmVmID0gdXNlUmVmKHtcbiAgICAgICAgZGF0YTogaW5pdGlhbERhdGEsXG4gICAgICAgIGVycm9yOiBpbml0aWFsRXJyb3IsXG4gICAgICAgIGlzVmFsaWRhdGluZzogaW5pdGlhbElzVmFsaWRhdGluZ1xuICAgIH0pO1xuICAgIC8vIGRpc3BsYXkgdGhlIGRhdGEgbGFiZWwgaW4gdGhlIFJlYWN0IERldlRvb2xzIG5leHQgdG8gU1dSIGhvb2tzXG4gICAgdXNlRGVidWdWYWx1ZShzdGF0ZVJlZi5jdXJyZW50LmRhdGEpO1xuICAgIHZhciByZXJlbmRlciA9IHVzZVN0YXRlKG51bGwpWzFdO1xuICAgIHZhciBkaXNwYXRjaCA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICAgIHZhciBzaG91bGRVcGRhdGVTdGF0ZSA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBrIGluIHBheWxvYWQpIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZVJlZi5jdXJyZW50W2tdID09PSBwYXlsb2FkW2tdKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGF0ZVJlZi5jdXJyZW50W2tdID0gcGF5bG9hZFtrXTtcbiAgICAgICAgICAgIGlmIChzdGF0ZURlcGVuZGVuY2llcy5jdXJyZW50W2tdKSB7XG4gICAgICAgICAgICAgICAgc2hvdWxkVXBkYXRlU3RhdGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzaG91bGRVcGRhdGVTdGF0ZSB8fCBjb25maWcuc3VzcGVuc2UpIHtcbiAgICAgICAgICAgIGlmICh1bm1vdW50ZWRSZWYuY3VycmVudClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICByZXJlbmRlcih7fSk7XG4gICAgICAgIH1cbiAgICB9LCBbXSk7XG4gICAgLy8gZXJyb3IgcmVmIGluc2lkZSByZXZhbGlkYXRlIChpcyBsYXN0IHJlcXVlc3QgZXJyb3JlZD8pXG4gICAgdmFyIHVubW91bnRlZFJlZiA9IHVzZVJlZihmYWxzZSk7XG4gICAgdmFyIGtleVJlZiA9IHVzZVJlZihrZXkpO1xuICAgIC8vIGRvIHVubW91bnQgY2hlY2sgZm9yIGNhbGxiYWNrc1xuICAgIHZhciBldmVudHNSZWYgPSB1c2VSZWYoe1xuICAgICAgICBlbWl0OiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVubW91bnRlZFJlZi5jdXJyZW50KVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIChfYSA9IGNvbmZpZ1JlZi5jdXJyZW50KVtldmVudF0uYXBwbHkoX2EsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgYm91bmRNdXRhdGUgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZGF0YSwgc2hvdWxkUmV2YWxpZGF0ZSkge1xuICAgICAgICByZXR1cm4gbXV0YXRlKGtleVJlZi5jdXJyZW50LCBkYXRhLCBzaG91bGRSZXZhbGlkYXRlKTtcbiAgICB9LCBbXSk7XG4gICAgdmFyIGFkZFJldmFsaWRhdG9yID0gZnVuY3Rpb24gKHJldmFsaWRhdG9ycywgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKCFyZXZhbGlkYXRvcnNba2V5XSkge1xuICAgICAgICAgICAgcmV2YWxpZGF0b3JzW2tleV0gPSBbY2FsbGJhY2tdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV2YWxpZGF0b3JzW2tleV0ucHVzaChjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZW1vdmVSZXZhbGlkYXRvciA9IGZ1bmN0aW9uIChyZXZsaWRhdG9ycywgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHJldmxpZGF0b3JzW2tleV0pIHtcbiAgICAgICAgICAgIHZhciByZXZhbGlkYXRvcnMgPSByZXZsaWRhdG9yc1trZXldO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gcmV2YWxpZGF0b3JzLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICAvLyAxMHggZmFzdGVyIHRoYW4gc3BsaWNlXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9qc3BlcmYuY29tL2FycmF5LXJlbW92ZS1ieS1pbmRleFxuICAgICAgICAgICAgICAgIHJldmFsaWRhdG9yc1tpbmRleF0gPSByZXZhbGlkYXRvcnNbcmV2YWxpZGF0b3JzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgIHJldmFsaWRhdG9ycy5wb3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gc3RhcnQgYSByZXZhbGlkYXRpb25cbiAgICB2YXIgcmV2YWxpZGF0ZSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChyZXZhbGlkYXRlT3B0cykge1xuICAgICAgICBpZiAocmV2YWxpZGF0ZU9wdHMgPT09IHZvaWQgMCkgeyByZXZhbGlkYXRlT3B0cyA9IHt9OyB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbG9hZGluZywgc2hvdWxkRGVkdXBpbmcsIG5ld0RhdGEsIHN0YXJ0QXQsIHNob3VsZElnbm9yZVJlcXVlc3QsIG5ld1N0YXRlLCBlcnJfMywgcmV0cnlDb3VudDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgha2V5IHx8ICFmbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZmFsc2VdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVubW91bnRlZFJlZi5jdXJyZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBmYWxzZV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlT3B0cyA9IE9iamVjdC5hc3NpZ24oeyBkZWR1cGU6IGZhbHNlIH0sIHJldmFsaWRhdGVPcHRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkRGVkdXBpbmcgPSB0eXBlb2YgQ09OQ1VSUkVOVF9QUk9NSVNFU1trZXldICE9PSAndW5kZWZpbmVkJyAmJiByZXZhbGlkYXRlT3B0cy5kZWR1cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgNiwgLCA3XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNWYWxpZGF0aW5nOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlLnNldChrZXlWYWxpZGF0aW5nLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2hvdWxkRGVkdXBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHVwZGF0ZSBvdGhlciBob29rc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb2FkY2FzdFN0YXRlKGtleSwgc3RhdGVSZWYuY3VycmVudC5kYXRhLCBzdGF0ZVJlZi5jdXJyZW50LmVycm9yLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGEgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydEF0ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzaG91bGREZWR1cGluZykgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGVyZSdzIGFscmVhZHkgYW4gb25nb2luZyByZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBvbmUgbmVlZHMgdG8gYmUgZGVkdXBsaWNhdGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRBdCA9IENPTkNVUlJFTlRfUFJPTUlTRVNfVFNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIENPTkNVUlJFTlRfUFJPTUlTRVNba2V5XV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgbm8gY2FjaGUgYmVpbmcgcmVuZGVyZWQgY3VycmVudGx5IChpdCBzaG93cyBhIGJsYW5rIHBhZ2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgdHJpZ2dlciB0aGUgbG9hZGluZyBzbG93IGV2ZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5sb2FkaW5nVGltZW91dCAmJiAhY2FjaGUuZ2V0KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvYWRpbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudHNSZWYuY3VycmVudC5lbWl0KCdvbkxvYWRpbmdTbG93Jywga2V5LCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGNvbmZpZy5sb2FkaW5nVGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm5BcmdzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09OQ1VSUkVOVF9QUk9NSVNFU1trZXldID0gZm4uYXBwbHkodm9pZCAwLCBmbkFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09OQ1VSUkVOVF9QUk9NSVNFU1trZXldID0gZm4oa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIENPTkNVUlJFTlRfUFJPTUlTRVNfVFNba2V5XSA9IHN0YXJ0QXQgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgQ09OQ1VSUkVOVF9QUk9NSVNFU1trZXldXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF0YSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBDT05DVVJSRU5UX1BST01JU0VTW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIENPTkNVUlJFTlRfUFJPTUlTRVNfVFNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGNvbmZpZy5kZWR1cGluZ0ludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaWdnZXIgdGhlIHN1Y2Nlc3MgZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGRvIHRoaXMgZm9yIHRoZSBvcmlnaW5hbCByZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzUmVmLmN1cnJlbnQuZW1pdCgnb25TdWNjZXNzJywgbmV3RGF0YSwga2V5LCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA1O1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRJZ25vcmVSZXF1ZXN0ID0gXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSdyZSBvdGhlciBvbmdvaW5nIHJlcXVlc3QocyksIHN0YXJ0ZWQgYWZ0ZXIgdGhlIGN1cnJlbnQgb25lLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBpZ25vcmUgdGhlIGN1cnJlbnQgb25lIHRvIGF2b2lkIHBvc3NpYmxlIHJhY2UgY29uZGl0aW9uczpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgcmVxMS0tLS0tLS0tLS0tLS0tLS0tLT5yZXMxICAgICAgICAoY3VycmVudCBvbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgcmVxMi0tLS0tLS0tLS0tLS0tLS0+cmVzMlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlcXVlc3QgdGhhdCBmaXJlZCBsYXRlciB3aWxsIGFsd2F5cyBiZSBrZXB0LlxuICAgICAgICAgICAgICAgICAgICAgICAgQ09OQ1VSUkVOVF9QUk9NSVNFU19UU1trZXldID4gc3RhcnRBdCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlJ3JlIG90aGVyIG11dGF0aW9ucyhzKSwgb3ZlcmxhcHBlZCB3aXRoIHRoZSBjdXJyZW50IHJldmFsaWRhdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICByZXEtLS0tLS0tLS0tLS0tLS0tLS0+cmVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgbXV0YXRlLS0tLS0tPmVuZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHJlcS0tLS0tLS0tLS0tLT5yZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIG11dGF0ZS0tLS0tLT5lbmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICByZXEtLS0tLS0tLS0tLS0tLS0tLS0+cmVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgbXV0YXRlLS0tLS0tLS4uLi0tLS0tLS0tLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgaGF2ZSB0byBpZ25vcmUgdGhlIHJldmFsaWRhdGlvbiByZXN1bHQgKHJlcykgYmVjYXVzZSBpdCdzIG5vIGxvbmdlciBmcmVzaC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtZWFud2hpbGUsIGEgbmV3IHJldmFsaWRhdGlvbiBzaG91bGQgYmUgdHJpZ2dlcmVkIHdoZW4gdGhlIG11dGF0aW9uIGVuZHMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKE1VVEFUSU9OX1RTW2tleV0gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzdGFydEF0IDw9IE1VVEFUSU9OX1RTW2tleV0gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgMlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRBdCA8PSBNVVRBVElPTl9FTkRfVFNba2V5XSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNVVRBVElPTl9FTkRfVFNba2V5XSA9PT0gMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZElnbm9yZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaCh7IGlzVmFsaWRhdGluZzogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGZhbHNlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlLnNldChrZXksIG5ld0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUuc2V0KGtleUVyciwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlLnNldChrZXlWYWxpZGF0aW5nLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkYXRpbmc6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdGF0ZVJlZi5jdXJyZW50LmVycm9yICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGRvbid0IGhhdmUgYW4gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZS5lcnJvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlnLmNvbXBhcmUoc3RhdGVSZWYuY3VycmVudC5kYXRhLCBuZXdEYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZXAgY29tcGFyZSB0byBhdm9pZCBleHRyYSByZS1yZW5kZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkYXRhIGNoYW5nZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZS5kYXRhID0gbmV3RGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lcmdlIHRoZSBuZXcgc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5ld1N0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2hvdWxkRGVkdXBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHVwZGF0ZSBvdGhlciBob29rc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb2FkY2FzdFN0YXRlKGtleSwgbmV3RGF0YSwgbmV3U3RhdGUuZXJyb3IsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJfMyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBDT05DVVJSRU5UX1BST01JU0VTW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgQ09OQ1VSUkVOVF9QUk9NSVNFU19UU1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUuc2V0KGtleUVyciwgZXJyXzMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGEgbmV3IGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCB1c2UgZGVlcCBlcXVhbCBmb3IgZXJyb3JzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGVSZWYuY3VycmVudC5lcnJvciAhPT0gZXJyXzMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBrZWVwIHRoZSBzdGFsZSBkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkYXRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyXzNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNob3VsZERlZHVwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsc28gYnJvYWRjYXN0IHRvIHVwZGF0ZSBvdGhlciBob29rc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm9hZGNhc3RTdGF0ZShrZXksIHVuZGVmaW5lZCwgZXJyXzMsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBldmVudHMgYW5kIHJldHJ5XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHNSZWYuY3VycmVudC5lbWl0KCdvbkVycm9yJywgZXJyXzMsIGtleSwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcuc2hvdWxkUmV0cnlPbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnlDb3VudCA9IChyZXZhbGlkYXRlT3B0cy5yZXRyeUNvdW50IHx8IDApICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudHNSZWYuY3VycmVudC5lbWl0KCdvbkVycm9yUmV0cnknLCBlcnJfMywga2V5LCBjb25maWcsIHJldmFsaWRhdGUsIE9iamVjdC5hc3NpZ24oeyBkZWR1cGU6IHRydWUgfSwgcmV2YWxpZGF0ZU9wdHMsIHsgcmV0cnlDb3VudDogcmV0cnlDb3VudCB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA3XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRydWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9LCBba2V5XSk7XG4gICAgLy8gbW91bnRlZCAoY2xpZW50IHNpZGUgcmVuZGVyaW5nKVxuICAgIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIWtleSlcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIC8vIGFmdGVyIGBrZXlgIHVwZGF0ZXMsIHdlIG5lZWQgdG8gbWFyayBpdCBhcyBtb3VudGVkXG4gICAgICAgIHVubW91bnRlZFJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgIC8vIGFmdGVyIHRoZSBjb21wb25lbnQgaXMgbW91bnRlZCAoaHlkcmF0ZWQpLFxuICAgICAgICAvLyB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgZGF0YSBmcm9tIHRoZSBjYWNoZVxuICAgICAgICAvLyBhbmQgdHJpZ2dlciBhIHJldmFsaWRhdGlvblxuICAgICAgICB2YXIgY3VycmVudEhvb2tEYXRhID0gc3RhdGVSZWYuY3VycmVudC5kYXRhO1xuICAgICAgICB2YXIgbGF0ZXN0S2V5ZWREYXRhID0gcmVzb2x2ZURhdGEoKTtcbiAgICAgICAgLy8gdXBkYXRlIHRoZSBzdGF0ZSBpZiB0aGUga2V5IGNoYW5nZWQgKG5vdCB0aGUgaW5pdGFsIHJlbmRlcikgb3IgY2FjaGUgdXBkYXRlZFxuICAgICAgICBpZiAoa2V5UmVmLmN1cnJlbnQgIT09IGtleSkge1xuICAgICAgICAgICAga2V5UmVmLmN1cnJlbnQgPSBrZXk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb25maWcuY29tcGFyZShjdXJyZW50SG9va0RhdGEsIGxhdGVzdEtleWVkRGF0YSkpIHtcbiAgICAgICAgICAgIGRpc3BhdGNoKHsgZGF0YTogbGF0ZXN0S2V5ZWREYXRhIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJldmFsaWRhdGUgd2l0aCBkZWR1cGluZ1xuICAgICAgICB2YXIgc29mdFJldmFsaWRhdGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiByZXZhbGlkYXRlKHsgZGVkdXBlOiB0cnVlIH0pOyB9O1xuICAgICAgICAvLyB0cmlnZ2VyIGEgcmV2YWxpZGF0aW9uXG4gICAgICAgIGlmIChjb25maWcucmV2YWxpZGF0ZU9uTW91bnQgfHxcbiAgICAgICAgICAgICghY29uZmlnLmluaXRpYWxEYXRhICYmIGNvbmZpZy5yZXZhbGlkYXRlT25Nb3VudCA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBsYXRlc3RLZXllZERhdGEgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgLy8gZGVsYXkgcmV2YWxpZGF0ZSBpZiB0aGVyZSdzIGNhY2hlXG4gICAgICAgICAgICAgICAgLy8gdG8gbm90IGJsb2NrIHRoZSByZW5kZXJpbmdcbiAgICAgICAgICAgICAgICBySUMoc29mdFJldmFsaWRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc29mdFJldmFsaWRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgcGVuZGluZyA9IGZhbHNlO1xuICAgICAgICB2YXIgb25Gb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChwZW5kaW5nIHx8ICFjb25maWdSZWYuY3VycmVudC5yZXZhbGlkYXRlT25Gb2N1cylcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBwZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHNvZnRSZXZhbGlkYXRlKCk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIChwZW5kaW5nID0gZmFsc2UpOyB9LCBjb25maWdSZWYuY3VycmVudC5mb2N1c1Rocm90dGxlSW50ZXJ2YWwpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgb25SZWNvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnUmVmLmN1cnJlbnQucmV2YWxpZGF0ZU9uUmVjb25uZWN0KSB7XG4gICAgICAgICAgICAgICAgc29mdFJldmFsaWRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gcmVnaXN0ZXIgZ2xvYmFsIGNhY2hlIHVwZGF0ZSBsaXN0ZW5lclxuICAgICAgICB2YXIgb25VcGRhdGUgPSBmdW5jdGlvbiAoc2hvdWxkUmV2YWxpZGF0ZSwgdXBkYXRlZERhdGEsIHVwZGF0ZWRFcnJvciwgdXBkYXRlZElzVmFsaWRhdGluZywgZGVkdXBlKSB7XG4gICAgICAgICAgICBpZiAoc2hvdWxkUmV2YWxpZGF0ZSA9PT0gdm9pZCAwKSB7IHNob3VsZFJldmFsaWRhdGUgPSB0cnVlOyB9XG4gICAgICAgICAgICBpZiAoZGVkdXBlID09PSB2b2lkIDApIHsgZGVkdXBlID0gdHJ1ZTsgfVxuICAgICAgICAgICAgLy8gdXBkYXRlIGhvb2sgc3RhdGVcbiAgICAgICAgICAgIHZhciBuZXdTdGF0ZSA9IHt9O1xuICAgICAgICAgICAgdmFyIG5lZWRVcGRhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlZERhdGEgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICAgICAgIWNvbmZpZy5jb21wYXJlKHN0YXRlUmVmLmN1cnJlbnQuZGF0YSwgdXBkYXRlZERhdGEpKSB7XG4gICAgICAgICAgICAgICAgbmV3U3RhdGUuZGF0YSA9IHVwZGF0ZWREYXRhO1xuICAgICAgICAgICAgICAgIG5lZWRVcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYWx3YXlzIHVwZGF0ZSBlcnJvclxuICAgICAgICAgICAgLy8gYmVjYXVzZSBpdCBjYW4gYmUgYHVuZGVmaW5lZGBcbiAgICAgICAgICAgIGlmIChzdGF0ZVJlZi5jdXJyZW50LmVycm9yICE9PSB1cGRhdGVkRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBuZXdTdGF0ZS5lcnJvciA9IHVwZGF0ZWRFcnJvcjtcbiAgICAgICAgICAgICAgICBuZWVkVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlZElzVmFsaWRhdGluZyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgICAgICBzdGF0ZVJlZi5jdXJyZW50LmlzVmFsaWRhdGluZyAhPT0gdXBkYXRlZElzVmFsaWRhdGluZykge1xuICAgICAgICAgICAgICAgIG5ld1N0YXRlLmlzVmFsaWRhdGluZyA9IHVwZGF0ZWRJc1ZhbGlkYXRpbmc7XG4gICAgICAgICAgICAgICAgbmVlZFVwZGF0ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmVlZFVwZGF0ZSkge1xuICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5ld1N0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaG91bGRSZXZhbGlkYXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlZHVwZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc29mdFJldmFsaWRhdGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXZhbGlkYXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBhZGRSZXZhbGlkYXRvcihGT0NVU19SRVZBTElEQVRPUlMsIG9uRm9jdXMpO1xuICAgICAgICBhZGRSZXZhbGlkYXRvcihSRUNPTk5FQ1RfUkVWQUxJREFUT1JTLCBvblJlY29ubmVjdCk7XG4gICAgICAgIGFkZFJldmFsaWRhdG9yKENBQ0hFX1JFVkFMSURBVE9SUywgb25VcGRhdGUpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gY2xlYW51cFxuICAgICAgICAgICAgZGlzcGF0Y2ggPSBmdW5jdGlvbiAoKSB7IHJldHVybiBudWxsOyB9O1xuICAgICAgICAgICAgLy8gbWFyayBpdCBhcyB1bm1vdW50ZWRcbiAgICAgICAgICAgIHVubW91bnRlZFJlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlbW92ZVJldmFsaWRhdG9yKEZPQ1VTX1JFVkFMSURBVE9SUywgb25Gb2N1cyk7XG4gICAgICAgICAgICByZW1vdmVSZXZhbGlkYXRvcihSRUNPTk5FQ1RfUkVWQUxJREFUT1JTLCBvblJlY29ubmVjdCk7XG4gICAgICAgICAgICByZW1vdmVSZXZhbGlkYXRvcihDQUNIRV9SRVZBTElEQVRPUlMsIG9uVXBkYXRlKTtcbiAgICAgICAgfTtcbiAgICB9LCBba2V5LCByZXZhbGlkYXRlXSk7XG4gICAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0aW1lciA9IG51bGw7XG4gICAgICAgIHZhciB0aWNrID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoIXN0YXRlUmVmLmN1cnJlbnQuZXJyb3IgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY29uZmlnUmVmLmN1cnJlbnQucmVmcmVzaFdoZW5IaWRkZW4gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnUmVmLmN1cnJlbnQuaXNEb2N1bWVudFZpc2libGUoKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY29uZmlnUmVmLmN1cnJlbnQucmVmcmVzaFdoZW5PZmZsaW5lIHx8IGNvbmZpZ1JlZi5jdXJyZW50LmlzT25saW5lKCkpKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IHJldmFsaWRhdGUgd2hlbiB0aGUgcGFnZSBpcyB2aXNpYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBBUEkgcmVxdWVzdCBlcnJvcmVkLCB3ZSBzdG9wIHBvbGxpbmcgaW4gdGhpcyByb3VuZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGxldCB0aGUgZXJyb3IgcmV0cnkgZnVuY3Rpb24gaGFuZGxlIGl0XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXZhbGlkYXRlKHsgZGVkdXBlOiB0cnVlIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25seSByZXZhbGlkYXRlIHdoZW4gdGhlIHBhZ2UgaXMgdmlzaWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgQVBJIHJlcXVlc3QgZXJyb3JlZCwgd2Ugc3RvcCBwb2xsaW5nIGluIHRoaXMgcm91bmRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBsZXQgdGhlIGVycm9yIHJldHJ5IGZ1bmN0aW9uIGhhbmRsZSBpdFxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIHRoZSBsYXRlc3QgcmVmcmVzaEludGVydmFsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnUmVmLmN1cnJlbnQucmVmcmVzaEludGVydmFsICYmICFzdGF0ZVJlZi5jdXJyZW50LmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KHRpY2ssIGNvbmZpZ1JlZi5jdXJyZW50LnJlZnJlc2hJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyB9O1xuICAgICAgICBpZiAoY29uZmlnUmVmLmN1cnJlbnQucmVmcmVzaEludGVydmFsKSB7XG4gICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQodGljaywgY29uZmlnUmVmLmN1cnJlbnQucmVmcmVzaEludGVydmFsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRpbWVyKVxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIH07XG4gICAgfSwgW1xuICAgICAgICBjb25maWcucmVmcmVzaEludGVydmFsLFxuICAgICAgICBjb25maWcucmVmcmVzaFdoZW5IaWRkZW4sXG4gICAgICAgIGNvbmZpZy5yZWZyZXNoV2hlbk9mZmxpbmUsXG4gICAgICAgIHJldmFsaWRhdGVcbiAgICBdKTtcbiAgICAvLyBkZWZpbmUgcmV0dXJuZWQgc3RhdGVcbiAgICAvLyBjYW4gYmUgbWVtb3JpemVkIHNpbmNlIHRoZSBzdGF0ZSBpcyBhIHJlZlxuICAgIHZhciBtZW1vaXplZFN0YXRlID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IHsgcmV2YWxpZGF0ZTogcmV2YWxpZGF0ZSwgbXV0YXRlOiBib3VuZE11dGF0ZSB9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzdGF0ZSwge1xuICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgICAvLyBga2V5YCBtaWdodCBiZSBjaGFuZ2VkIGluIHRoZSB1cGNvbWluZyBob29rIHJlLXJlbmRlcixcbiAgICAgICAgICAgICAgICAvLyBidXQgdGhlIHByZXZpb3VzIHN0YXRlIHdpbGwgc3RheVxuICAgICAgICAgICAgICAgIC8vIHNvIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIGxhdGVzdCBrZXkgYW5kIGRhdGEgKGZhbGxiYWNrIHRvIGBpbml0aWFsRGF0YWApXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlRGVwZW5kZW5jaWVzLmN1cnJlbnQuZXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5UmVmLmN1cnJlbnQgPT09IGtleSA/IHN0YXRlUmVmLmN1cnJlbnQuZXJyb3IgOiBpbml0aWFsRXJyb3I7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZURlcGVuZGVuY2llcy5jdXJyZW50LmRhdGEgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5UmVmLmN1cnJlbnQgPT09IGtleSA/IHN0YXRlUmVmLmN1cnJlbnQuZGF0YSA6IGluaXRpYWxEYXRhO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzVmFsaWRhdGluZzoge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZURlcGVuZGVuY2llcy5jdXJyZW50LmlzVmFsaWRhdGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZVJlZi5jdXJyZW50LmlzVmFsaWRhdGluZztcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9LCBbcmV2YWxpZGF0ZV0pO1xuICAgIC8vIHN1c3BlbnNlXG4gICAgaWYgKGNvbmZpZy5zdXNwZW5zZSkge1xuICAgICAgICAvLyBpbiBzdXNwZW5zZSBtb2RlLCB3ZSBjYW4ndCByZXR1cm4gZW1wdHkgc3RhdGVcbiAgICAgICAgLy8gKGl0IHNob3VsZCBiZSBzdXNwZW5kZWQpXG4gICAgICAgIC8vIHRyeSB0byBnZXQgZGF0YSBhbmQgZXJyb3IgZnJvbSBjYWNoZVxuICAgICAgICB2YXIgbGF0ZXN0RGF0YSA9IGNhY2hlLmdldChrZXkpO1xuICAgICAgICB2YXIgbGF0ZXN0RXJyb3IgPSBjYWNoZS5nZXQoa2V5RXJyKTtcbiAgICAgICAgaWYgKHR5cGVvZiBsYXRlc3REYXRhID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgbGF0ZXN0RGF0YSA9IGluaXRpYWxEYXRhO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgbGF0ZXN0RXJyb3IgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBsYXRlc3RFcnJvciA9IGluaXRpYWxFcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGxhdGVzdERhdGEgPT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICB0eXBlb2YgbGF0ZXN0RXJyb3IgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAvLyBuZWVkIHRvIHN0YXJ0IHRoZSByZXF1ZXN0IGlmIGl0IGhhc24ndFxuICAgICAgICAgICAgaWYgKCFDT05DVVJSRU5UX1BST01JU0VTW2tleV0pIHtcbiAgICAgICAgICAgICAgICAvLyB0cmlnZ2VyIHJldmFsaWRhdGUgaW1tZWRpYXRlbHlcbiAgICAgICAgICAgICAgICAvLyB0byBnZXQgdGhlIHByb21pc2VcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoQ09OQ1VSUkVOVF9QUk9NSVNFU1trZXldICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIENPTkNVUlJFTlRfUFJPTUlTRVNba2V5XS50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgaXQgaXMgYSBwcm9taXNlXG4gICAgICAgICAgICAgICAgdGhyb3cgQ09OQ1VSUkVOVF9QUk9NSVNFU1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaXQncyBhIHZhbHVlLCByZXR1cm4gaXQgZGlyZWN0bHkgKG92ZXJyaWRlKVxuICAgICAgICAgICAgbGF0ZXN0RGF0YSA9IENPTkNVUlJFTlRfUFJPTUlTRVNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGxhdGVzdERhdGEgPT09ICd1bmRlZmluZWQnICYmIGxhdGVzdEVycm9yKSB7XG4gICAgICAgICAgICAvLyBpbiBzdXNwZW5zZSBtb2RlLCB0aHJvdyBlcnJvciBpZiB0aGVyZSdzIG5vIGNvbnRlbnRcbiAgICAgICAgICAgIHRocm93IGxhdGVzdEVycm9yO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJldHVybiB0aGUgbGF0ZXN0IGRhdGEgLyBlcnJvciBmcm9tIGNhY2hlXG4gICAgICAgIC8vIGluIGNhc2UgYGtleWAgaGFzIGNoYW5nZWRcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVycm9yOiBsYXRlc3RFcnJvcixcbiAgICAgICAgICAgIGRhdGE6IGxhdGVzdERhdGEsXG4gICAgICAgICAgICByZXZhbGlkYXRlOiByZXZhbGlkYXRlLFxuICAgICAgICAgICAgbXV0YXRlOiBib3VuZE11dGF0ZSxcbiAgICAgICAgICAgIGlzVmFsaWRhdGluZzogc3RhdGVSZWYuY3VycmVudC5pc1ZhbGlkYXRpbmdcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIG1lbW9pemVkU3RhdGU7XG59XG52YXIgU1dSQ29uZmlnID0gU1dSQ29uZmlnQ29udGV4dC5Qcm92aWRlcjtcbmV4cG9ydCB7IHRyaWdnZXIsIG11dGF0ZSwgU1dSQ29uZmlnIH07XG5leHBvcnQgZGVmYXVsdCB1c2VTV1I7XG4iLCJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbnZhciBfX3Jlc3QgPSAodGhpcyAmJiB0aGlzLl9fcmVzdCkgfHwgZnVuY3Rpb24gKHMsIGUpIHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxuICAgICAgICB0W3BdID0gc1twXTtcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcbiAgICAgICAgfVxuICAgIHJldHVybiB0O1xufTtcbmltcG9ydCB7IHVzZUNvbnRleHQsIHVzZVJlZiwgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgZGVmYXVsdENvbmZpZywgeyBjYWNoZSB9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCBTV1JDb25maWdDb250ZXh0IGZyb20gJy4vc3dyLWNvbmZpZy1jb250ZXh0JztcbmltcG9ydCB1c2VTV1IgZnJvbSAnLi91c2Utc3dyJztcbmZ1bmN0aW9uIHVzZVNXUkluZmluaXRlKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciBnZXRLZXksIGZuLCBjb25maWcgPSB7fTtcbiAgICBpZiAoYXJncy5sZW5ndGggPj0gMSkge1xuICAgICAgICBnZXRLZXkgPSBhcmdzWzBdO1xuICAgIH1cbiAgICBpZiAoYXJncy5sZW5ndGggPiAyKSB7XG4gICAgICAgIGZuID0gYXJnc1sxXTtcbiAgICAgICAgY29uZmlnID0gYXJnc1syXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXJnc1sxXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgZm4gPSBhcmdzWzFdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmdzWzFdID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uZmlnID0gYXJnc1sxXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0Q29uZmlnLCB1c2VDb250ZXh0KFNXUkNvbmZpZ0NvbnRleHQpLCBjb25maWcpO1xuICAgIHZhciBfYSA9IGNvbmZpZy5pbml0aWFsU2l6ZSwgaW5pdGlhbFNpemUgPSBfYSA9PT0gdm9pZCAwID8gMSA6IF9hLCBfYiA9IGNvbmZpZy5yZXZhbGlkYXRlQWxsLCByZXZhbGlkYXRlQWxsID0gX2IgPT09IHZvaWQgMCA/IGZhbHNlIDogX2IsIF9jID0gY29uZmlnLnBlcnNpc3RTaXplLCBwZXJzaXN0U2l6ZSA9IF9jID09PSB2b2lkIDAgPyBmYWxzZSA6IF9jLCBkZWZhdWx0RmV0Y2hlciA9IGNvbmZpZy5mZXRjaGVyLCBleHRyYUNvbmZpZyA9IF9fcmVzdChjb25maWcsIFtcImluaXRpYWxTaXplXCIsIFwicmV2YWxpZGF0ZUFsbFwiLCBcInBlcnNpc3RTaXplXCIsIFwiZmV0Y2hlclwiXSk7XG4gICAgaWYgKHR5cGVvZiBmbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gdXNlIHRoZSBnbG9iYWwgZmV0Y2hlclxuICAgICAgICAvLyB3ZSBoYXZlIHRvIGNvbnZlcnQgdGhlIHR5cGUgaGVyZVxuICAgICAgICBmbiA9IGRlZmF1bHRGZXRjaGVyO1xuICAgIH1cbiAgICAvLyBnZXQgdGhlIHNlcmlhbGl6ZWQga2V5IG9mIHRoZSBmaXJzdCBwYWdlXG4gICAgdmFyIGZpcnN0UGFnZUtleSA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgICAgO1xuICAgICAgICBmaXJzdFBhZ2VLZXkgPSBjYWNoZS5zZXJpYWxpemVLZXkoZ2V0S2V5KDAsIG51bGwpKVswXTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBub3QgcmVhZHlcbiAgICB9XG4gICAgdmFyIHJlcmVuZGVyID0gdXNlU3RhdGUoZmFsc2UpWzFdO1xuICAgIC8vIHdlIHVzZSBjYWNoZSB0byBwYXNzIGV4dHJhIGluZm8gKGNvbnRleHQpIHRvIGZldGNoZXIgc28gaXQgY2FuIGJlIGdsb2JhbGx5IHNoYXJlZFxuICAgIC8vIGhlcmUgd2UgZ2V0IHRoZSBrZXkgb2YgdGhlIGZldGNoZXIgY29udGV4dCBjYWNoZVxuICAgIHZhciBjb250ZXh0Q2FjaGVLZXkgPSBudWxsO1xuICAgIGlmIChmaXJzdFBhZ2VLZXkpIHtcbiAgICAgICAgY29udGV4dENhY2hlS2V5ID0gJ2NvbnRleHRAJyArIGZpcnN0UGFnZUtleTtcbiAgICB9XG4gICAgLy8gcGFnZSBjb3VudCBpcyBjYWNoZWQgYXMgd2VsbCwgc28gd2hlbiBuYXZpZ2F0aW5nIHRoZSBsaXN0IGNhbiBiZSByZXN0b3JlZFxuICAgIHZhciBwYWdlQ291bnRDYWNoZUtleSA9IG51bGw7XG4gICAgdmFyIGNhY2hlZFBhZ2VTaXplO1xuICAgIGlmIChmaXJzdFBhZ2VLZXkpIHtcbiAgICAgICAgcGFnZUNvdW50Q2FjaGVLZXkgPSAnc2l6ZUAnICsgZmlyc3RQYWdlS2V5O1xuICAgICAgICBjYWNoZWRQYWdlU2l6ZSA9IGNhY2hlLmdldChwYWdlQ291bnRDYWNoZUtleSk7XG4gICAgfVxuICAgIHZhciBwYWdlQ291bnRSZWYgPSB1c2VSZWYoY2FjaGVkUGFnZVNpemUgfHwgaW5pdGlhbFNpemUpO1xuICAgIHZhciBkaWRNb3VudFJlZiA9IHVzZVJlZihmYWxzZSk7XG4gICAgLy8gZXZlcnkgdGltZSB0aGUga2V5IGNoYW5nZXMsIHdlIHJlc2V0IHRoZSBwYWdlIHNpemUgaWYgaXQncyBub3QgcGVyc2lzdGVkXG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGRpZE1vdW50UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGlmICghcGVyc2lzdFNpemUpIHtcbiAgICAgICAgICAgICAgICBwYWdlQ291bnRSZWYuY3VycmVudCA9IGluaXRpYWxTaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGlkTW91bnRSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9LCBbZmlyc3RQYWdlS2V5XSk7XG4gICAgLy8gYWN0dWFsIHN3ciBvZiBhbGwgcGFnZXNcbiAgICB2YXIgc3dyID0gdXNlU1dSKGZpcnN0UGFnZUtleSA/IFsnbWFueScsIGZpcnN0UGFnZUtleV0gOiBudWxsLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSwgb3JpZ2luYWxEYXRhLCBmb3JjZSwgZGF0YSwgcHJldmlvdXNQYWdlRGF0YSwgaSwgX2IsIHBhZ2VLZXksIHBhZ2VBcmdzLCBwYWdlRGF0YSwgc2hvdWxkUmV2YWxpZGF0ZVBhZ2U7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIF9hID0gY2FjaGUuZ2V0KGNvbnRleHRDYWNoZUtleSkgfHwge30sIG9yaWdpbmFsRGF0YSA9IF9hLm9yaWdpbmFsRGF0YSwgZm9yY2UgPSBfYS5mb3JjZTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1BhZ2VEYXRhID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGkgPCBwYWdlQ291bnRSZWYuY3VycmVudCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xuICAgICAgICAgICAgICAgICAgICBfYiA9IGNhY2hlLnNlcmlhbGl6ZUtleShnZXRLZXkoaSwgcHJldmlvdXNQYWdlRGF0YSkpLCBwYWdlS2V5ID0gX2JbMF0sIHBhZ2VBcmdzID0gX2JbMV07XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFnZUtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGFnZUtleSBpcyBmYWxzeSwgc3RvcCBmZXRjaGluZyBuZXh0IHBhZ2VzXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA4XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwYWdlRGF0YSA9IGNhY2hlLmdldChwYWdlS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkUmV2YWxpZGF0ZVBhZ2UgPSByZXZhbGlkYXRlQWxsIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JjZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBmb3JjZSA9PT0gJ3VuZGVmaW5lZCcgJiYgaSA9PT0gMCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChvcmlnaW5hbERhdGEgJiYgIWNvbmZpZy5jb21wYXJlKG9yaWdpbmFsRGF0YVtpXSwgcGFnZURhdGEpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHBhZ2VEYXRhID09PSAndW5kZWZpbmVkJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzaG91bGRSZXZhbGlkYXRlUGFnZSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHBhZ2VBcmdzICE9PSBudWxsKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZuLmFwcGx5KHZvaWQgMCwgcGFnZUFyZ3MpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VEYXRhID0gX2Muc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIGZuKHBhZ2VLZXkpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VEYXRhID0gX2Muc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDU7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBjYWNoZS5zZXQocGFnZUtleSwgcGFnZURhdGEpO1xuICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDY7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBkYXRhLnB1c2gocGFnZURhdGEpO1xuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1BhZ2VEYXRhID0gcGFnZURhdGE7XG4gICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gNztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICAvLyBvbmNlIHdlIGV4ZWN1dGVkIHRoZSBkYXRhIGZldGNoaW5nIGJhc2VkIG9uIHRoZSBjb250ZXh0LCBjbGVhciB0aGUgY29udGV4dFxuICAgICAgICAgICAgICAgICAgICBjYWNoZS5kZWxldGUoY29udGV4dENhY2hlS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRoZSBkYXRhXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBkYXRhXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7IH0sIGV4dHJhQ29uZmlnKTtcbiAgICAvLyBrZWVwIHRoZSBkYXRhIGluc2lkZSBhIHJlZlxuICAgIHZhciBkYXRhUmVmID0gdXNlUmVmKHN3ci5kYXRhKTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICBkYXRhUmVmLmN1cnJlbnQgPSBzd3IuZGF0YTtcbiAgICB9LCBbc3dyLmRhdGFdKTtcbiAgICB2YXIgbXV0YXRlID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGRhdGEsIHNob3VsZFJldmFsaWRhdGUpIHtcbiAgICAgICAgaWYgKHNob3VsZFJldmFsaWRhdGUgPT09IHZvaWQgMCkgeyBzaG91bGRSZXZhbGlkYXRlID0gdHJ1ZTsgfVxuICAgICAgICBpZiAoc2hvdWxkUmV2YWxpZGF0ZSAmJiB0eXBlb2YgZGF0YSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIC8vIHdlIG9ubHkgcmV2YWxpZGF0ZSB0aGUgcGFnZXMgdGhhdCBhcmUgY2hhbmdlZFxuICAgICAgICAgICAgdmFyIG9yaWdpbmFsRGF0YSA9IGRhdGFSZWYuY3VycmVudDtcbiAgICAgICAgICAgIGNhY2hlLnNldChjb250ZXh0Q2FjaGVLZXksIHsgb3JpZ2luYWxEYXRhOiBvcmlnaW5hbERhdGEsIGZvcmNlOiBmYWxzZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzaG91bGRSZXZhbGlkYXRlKSB7XG4gICAgICAgICAgICAvLyBjYWxsaW5nIGBtdXRhdGUoKWAsIHdlIHJldmFsaWRhdGUgYWxsIHBhZ2VzXG4gICAgICAgICAgICBjYWNoZS5zZXQoY29udGV4dENhY2hlS2V5LCB7IGZvcmNlOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzd3IubXV0YXRlKGRhdGEsIHNob3VsZFJldmFsaWRhdGUpO1xuICAgIH0sIFtzd3IubXV0YXRlLCBjb250ZXh0Q2FjaGVLZXldKTtcbiAgICAvLyBleHRlbmQgdGhlIFNXUiBBUElcbiAgICB2YXIgc2l6ZSA9IHBhZ2VDb3VudFJlZi5jdXJyZW50O1xuICAgIHZhciBzZXRTaXplID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGFyZykge1xuICAgICAgICBpZiAodHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcGFnZUNvdW50UmVmLmN1cnJlbnQgPSBhcmcocGFnZUNvdW50UmVmLmN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBwYWdlQ291bnRSZWYuY3VycmVudCA9IGFyZztcbiAgICAgICAgfVxuICAgICAgICBjYWNoZS5zZXQocGFnZUNvdW50Q2FjaGVLZXksIHBhZ2VDb3VudFJlZi5jdXJyZW50KTtcbiAgICAgICAgcmVyZW5kZXIoZnVuY3Rpb24gKHYpIHsgcmV0dXJuICF2OyB9KTtcbiAgICAgICAgcmV0dXJuIG11dGF0ZShmdW5jdGlvbiAodikgeyByZXR1cm4gdjsgfSk7XG4gICAgfSwgW211dGF0ZSwgcGFnZUNvdW50Q2FjaGVLZXldKTtcbiAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIHN3ciksIHsgbXV0YXRlOiBtdXRhdGUsXG4gICAgICAgIHNpemU6IHNpemUsXG4gICAgICAgIHNldFNpemU6IHNldFNpemUgfSk7XG59XG5leHBvcnQgeyB1c2VTV1JJbmZpbml0ZSB9O1xuIiwiZXhwb3J0ICogZnJvbSAnLi91c2Utc3dyJztcbmltcG9ydCB7IGRlZmF1bHQgYXMgdXNlU1dSIH0gZnJvbSAnLi91c2Utc3dyJztcbmV4cG9ydCB7IHVzZVNXUkluZmluaXRlIH0gZnJvbSAnLi91c2Utc3dyLWluZmluaXRlJztcbmV4cG9ydCB7IGNhY2hlIH0gZnJvbSAnLi9jb25maWcnO1xuZXhwb3J0IGRlZmF1bHQgdXNlU1dSO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==